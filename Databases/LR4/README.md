## Задание

### Первая часть

Лабораторная работа посвящена упрощению работы аналитика с помощью создания и использования функций. При выполнении задания необходимо:
* Составить SQL-скрипты для создания нескольких функций, упрощающих манипуляции с
данными.
* Продемонстрировать полученные знания о возможностях языка PL/pgSQL. В скриптах должны
использоваться:
    + Циклы.
    + Ветвления.
    + Переменные.
    + Курсоры.
    + Исключения.
* Обосновать преимущества механизма функций перед механизмом представлений.

### Вторая часть

Для выполнения задания необходим достаточно большой объем данных, чтобы оптимизация была целесообразной порядка 1 млн. строк в каждой таблице). Необходимо подготовить два запроса:
* Запрос к одной таблице, содержащий фильтрацию по нескольким полям.
* Запрос к нескольким связанным таблицам, содержащий фильтрацию по нескольким полям.

Для каждого из этих запросов необходимо провести следующие шаги:
* Получить план выполнения запроса без использования индексов.
* Получить статистику (IO и Time) выполнения запроса без использования индексов.
* Создать нужные индексы, позволяющие ускорить запрос.
* Получить план выполнения запроса с использованием индексов и сравнить с первоначальным.
* Получить статистику выполнения запроса с использованием индексов и сравнить с первоначальной.
* Оценить эффективность выполнения оптимизированного запроса.